# version format
version: "{build}"

image: Visual Studio 2015
platform: x64
configuration: release

build:
  parallel: true

clone_folder: C:\projects\petmr-rd-tools

environment:
  ITKSRC: C:\projects\deps\ITK
  ITKINSTALL: C:\projects\deps\ITK-INSTALL
  ITKBUILD: C:\projects\deps\ITK-BUILD
  GLOGINSTALL: C:\projects\deps\glog-INSTALL
  GLOGBUILD: C:\projects\deps\glog-BUILD
  BOOSTSRC: C:\projects\deps\boost_1_63_0
  BOOSTINSTALL: C:\projects\deps\boost-INSTALL

install:
  - IF NOT EXIST C:\projects\deps mkdir C:\projects\deps
  - cd C:\projects\deps
  - set ITK_URL="https://downloads.sourceforge.net/project/itk/itk/4.10/InsightToolkit-4.10.1.zip"
  - IF NOT EXIST %ITKSRC% (
      appveyor DownloadFile %ITK_URL% -FileName ITK-4.10.1.zip &&
      7z x ITK-4.10.1.zip -oC:\projects\deps\ITK > nul
    )
  - IF NOT EXIST %ITKINSTALL% (
      cd %ITKBUILD% &&
      msbuild INSTALL.vcxproj
    )

cache:
  - C:\projects\deps\ITK\InsightToolkit-4.10.1
  - C:\projects\deps\ITK-BUILD
  - C:\projects\deps\ITK-INSTALL

build_script:
  - cd C:\projects\petmr-rd-tools

